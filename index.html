<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aarav Pillai</title>

<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
body {
  margin: 0;
  font-family: sans-serif;
  background: radial-gradient(circle at center, #111 0%, #000 70%);
  color: white;
  overflow-x: hidden;
}

nav {
  padding: 20px;
  display: flex;
  gap: 20px;
}

nav a {
  color: #ccc;
  text-decoration: none;
}

nav a:hover {
  color: white;
}

#constellation {
  width: 100%;
  height: 80vh;
}

.node {
  cursor: pointer;
}

.link {
  stroke: rgba(255,255,255,0.2);
  stroke-width: 1;
  stroke-dasharray: 4 4;
  animation: dash 10s linear infinite;
}

@keyframes dash {
  to {
    stroke-dashoffset: -1000;
  }
}

.pulse {
  animation: pulse 4s ease-in-out infinite;
}

@keyframes pulse {
  0% { r: 60; opacity: 0.7; }
  50% { r: 70; opacity: 1; }
  100% { r: 60; opacity: 0.7; }
}

#modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  visibility: hidden;
}

#modal.active {
  visibility: visible;
}

#modal-content {
  background: #111;
  padding: 40px;
  border: 1px solid #444;
  max-width: 500px;
}
</style>
</head>

<body>

<nav>
  <a href="#">home</a>
  <a href="#">research</a>
  <a href="#">writing</a>
  <a href="#">photography</a>
  <a href="#">contact</a>
</nav>

<h2 style="padding-left:20px;">current research interests</h2>

<svg id="constellation"></svg>

<div id="modal">
  <div id="modal-content"></div>
</div>

<script>

const width = window.innerWidth;
const height = window.innerHeight * 0.8;

const svg = d3.select("#constellation")
  .attr("width", width)
  .attr("height", height);

const nodes = [
  { id: "ai policy", color: "#e6b8d0" },
  { id: "healthcare ai", color: "#b8d4e6" },
  { id: "accessibility", color: "#c6e6d5" },
  { id: "creative ml", color: "#d7c6e6" }
];

const links = [
  { source: "ai policy", target: "healthcare ai" },
  { source: "healthcare ai", target: "accessibility" },
  { source: "accessibility", target: "creative ml" },
  { source: "creative ml", target: "ai policy" }
];

const simulation = d3.forceSimulation(nodes)
  .force("link", d3.forceLink(links).id(d => d.id).distance(200))
  .force("charge", d3.forceManyBody().strength(-200))
  .force("center", d3.forceCenter(width / 2, height / 2))
  .force("collision", d3.forceCollide().radius(80));

const link = svg.append("g")
  .selectAll("line")
  .data(links)
  .enter()
  .append("line")
  .attr("class", "link");

const node = svg.append("g")
  .selectAll("circle")
  .data(nodes)
  .enter()
  .append("circle")
  .attr("class", "node pulse")
  .attr("r", 60)
  .attr("fill", d => d.color)
  .attr("opacity", 0.8)
  .call(d3.drag()
    .on("start", dragStarted)
    .on("drag", dragged)
    .on("end", dragEnded)
  )
  .on("click", (event, d) => openModal(d.id));

const label = svg.append("g")
  .selectAll("text")
  .data(nodes)
  .enter()
  .append("text")
  .text(d => d.id)
  .attr("text-anchor", "middle")
  .attr("dy", ".3em")
  .attr("fill", "#222")
  .attr("pointer-events", "none");

simulation.on("tick", () => {
  link
    .attr("x1", d => d.source.x)
    .attr("y1", d => d.source.y)
    .attr("x2", d => d.target.x)
    .attr("y2", d => d.target.y);

  node
    .attr("cx", d => d.x)
    .attr("cy", d => d.y);

  label
    .attr("x", d => d.x)
    .attr("y", d => d.y);
});

function dragStarted(event) {
  if (!event.active) simulation.alphaTarget(0.3).restart();
  event.subject.fx = event.subject.x;
  event.subject.fy = event.subject.y;
}

function dragged(event) {
  event.subject.fx = event.x;
  event.subject.fy = event.y;
}

function dragEnded(event) {
  if (!event.active) simulation.alphaTarget(0);
  event.subject.fx = null;
  event.subject.fy = null;
}

function openModal(title) {
  document.getElementById("modal-content").innerHTML =
    "<h2>" + title + "</h2><p>Research details about " + title + ".</p>";
  document.getElementById("modal").classList.add("active");
}

document.getElementById("modal").addEventListener("click", () => {
  document.getElementById("modal").classList.remove("active");
});

</script>

</body>
</html>
