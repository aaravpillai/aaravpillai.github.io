<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>aarav pillai</title>
<link rel="icon" type="image/png" href="favicon.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#fdfdfd;
  --text:#111;
}

body{
  margin:0;
  overflow:hidden;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* subtle cargo-like grid */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:
    linear-gradient(rgba(0,0,0,.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,0,0,.03) 1px, transparent 1px);
  background-size:40px 40px;
  pointer-events:none;
}

/* top bar */
.topbar{
  position:fixed;
  top:0;
  left:0;
  right:0;
  height:38px;
  background:#fff;
  border-bottom:1px solid #e5e5e5;
  display:flex;
  align-items:center;
  padding:0 16px;
  font-size:.9em;
  z-index:1000;
}

.desktop{
  position:absolute;
  top:38px;
  left:0;
  right:0;
  bottom:0;
}

/* draggable windows */
.window{
  position:absolute;
  width:260px;
  background:#fff;
  border:1px solid #ddd;
  box-shadow:0 8px 30px rgba(0,0,0,.08);
  border-radius:6px;
  cursor:grab;
}

.window-header{
  padding:8px 10px;
  font-size:.8em;
  background:#fafafa;
  border-bottom:1px solid #eee;
}

.window-content{
  padding:12px;
  font-size:.85em;
  line-height:1.5;
}

canvas{
  position:absolute;
  inset:0;
  pointer-events:none;
}
</style>
</head>
<body>

<div class="topbar">
aarav pillai â€” infrastructure playground
</div>

<div class="desktop" id="desktop">

<canvas id="network"></canvas>

<div class="window" style="top:80px; left:120px;">
  <div class="window-header">creative ml</div>
  <div class="window-content">
    generative systems; aesthetic computation; sonic models.
  </div>
</div>

<div class="window" style="top:200px; left:450px;">
  <div class="window-header">healthcare ai</div>
  <div class="window-content">
    assistive systems; embodied ai; clinical infrastructures.
  </div>
</div>

<div class="window" style="top:300px; left:220px;">
  <div class="window-header">ai policy</div>
  <div class="window-content">
    governance; infrastructural power; data politics.
  </div>
</div>

<div class="window" style="top:120px; left:700px;">
  <div class="window-header">accessibility</div>
  <div class="window-content">
    adaptive systems; neurodiversity; sonic interaction.
  </div>
</div>

</div>

<script>
const canvas=document.getElementById("network");
const ctx=canvas.getContext("2d");
const desktop=document.getElementById("desktop");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

/* ---------- DRAG SYSTEM ---------- */

let active=null;
let offsetX=0;
let offsetY=0;

document.querySelectorAll(".window").forEach(win=>{
  win.addEventListener("mousedown",e=>{
    active=win;
    offsetX=e.clientX-win.offsetLeft;
    offsetY=e.clientY-win.offsetTop;
    win.style.cursor="grabbing";
  });
});

document.addEventListener("mousemove",e=>{
  if(active){
    active.style.left=(e.clientX-offsetX)+"px";
    active.style.top=(e.clientY-offsetY)+"px";
  }
});

document.addEventListener("mouseup",()=>{
  if(active){
    active.style.cursor="grab";
  }
  active=null;
});

/* ---------- NETWORK GAME ---------- */

function getCenters(){
  return [...document.querySelectorAll(".window")].map(w=>{
    return {
      el:w,
      x:w.offsetLeft+w.offsetWidth/2,
      y:w.offsetTop+w.offsetHeight/2
    }
  });
}

/* eigenvector centrality */
function computeCentrality(nodes){
  const n=nodes.length;
  const A=Array.from({length:n},()=>Array(n).fill(0));

  for(let i=0;i<n;i++){
    for(let j=i+1;j<n;j++){
      const dx=nodes[i].x-nodes[j].x;
      const dy=nodes[i].y-nodes[j].y;
      const dist=Math.hypot(dx,dy);
      if(dist<300){
        const w=1-dist/300;
        A[i][j]=w;
        A[j][i]=w;
      }
    }
  }

  let v=Array(n).fill(1);
  for(let k=0;k<10;k++){
    let v2=Array(n).fill(0);
    for(let i=0;i<n;i++){
      for(let j=0;j<n;j++){
        v2[i]+=A[i][j]*v[j];
      }
    }
    const norm=Math.sqrt(v2.reduce((s,x)=>s+x*x,0));
    if(norm>0) v=v2.map(x=>x/norm);
  }
  return v;
}

/* audio */
function playTone(freq){
  const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
  const osc=audioCtx.createOscillator();
  const gain=audioCtx.createGain();
  osc.type="sine";
  osc.frequency.value=freq;
  gain.gain.setValueAtTime(.15,audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(.001,audioCtx.currentTime+1.5);
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime+1.5);
}

/* click game */
document.querySelectorAll(".window").forEach((w,i)=>{
  w.addEventListener("dblclick",()=>{
    playTone(220+ i*80);
  });
});

/* render loop */
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const nodes=getCenters();
  const centrality=computeCentrality(nodes);

  for(let i=0;i<nodes.length;i++){
    for(let j=i+1;j<nodes.length;j++){
      const dx=nodes[i].x-nodes[j].x;
      const dy=nodes[i].y-nodes[j].y;
      const dist=Math.hypot(dx,dy);

      if(dist<300){
        ctx.beginPath();
        ctx.moveTo(nodes[i].x,nodes[i].y);
        ctx.lineTo(nodes[j].x,nodes[j].y);
        ctx.strokeStyle="rgba(0,0,0,"+(1-dist/300)*0.25+")";
        ctx.stroke();
      }
    }
  }

  nodes.forEach((node,i)=>{
    node.el.style.boxShadow=
      "0 8px 30px rgba(0,0,0,.08), 0 0 "+(centrality[i]*40)+"px rgba(0,0,0,.15)";
  });

  requestAnimationFrame(animate);
}

animate();

window.addEventListener("resize",()=>{
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
});
</script>

</body>
</html>
